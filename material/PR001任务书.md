# 编译原理研讨课实验PR001任务书

## 熟悉Clang的安装和使用

###实验内容：

本部分主要包含两个内容：

1. 掌握如何从源代码编译安装LLVM和Clang
2. 了解如何生成和查看C程序对应的AST

###验收标准：

1. 正确编译生成Clang和LLVM的可执行文件
2. 可以查看一个C程序对应的AST

## 添加element wise操作的制导

### 实验内容：

在程序中添加element wise操作的指导，区域以函数/过程的定义(不是声明)为单位，形如：

```c
#pragma elementWise
int func_name(){
    .....
}
```

对于添加了制导的源程序`*.c`，按照规则在编译时打印每个函数的名称，该函数是否在制导范围内。

对于一个函数的是否在制导范围内的定义：

`1. 一个制导总是匹配在其后出现的，离它最近的一个函数定义`

`2. 一个制导只能匹配最多一个函数定义`

**说明**：

`1. 制导和匹配的函数定义间可以有任何语句，没有限制`

`2. 打印函数名称功能无需自行从头实现，课程将提供模板供参考`

示例：

`Sample code 1:` 

```c
void foo1(){
  ....
}
```

`Sample output:"foo1: 0"`

`Sample code 2:`

```c
#pragma elementWise
void foo2(){
  ....
}
```

`Sample output: "foo2: 1"`

### 验收标准：

1. 实验报告提交到课程网站
   1. 课程网站有模板供参考。
2. 实验源代码放在本组的帐号下
   1. 所有文件都放在同一个目录`/home/account_name/PR001`中
   2. 修改后的源代码放入`./src`中
   3. 编写一个可执行脚本，放在`./scripts`下，如果只做了必做项的，名为`compile_and_check.sh`。该脚本接受一个参数，参数内容为源文件名称，该脚本的功能是调用修改后的Clang编译输入参数指定的源文件，并将编译时期的输出(`elementWise`的检查结果)放到标准错误上。